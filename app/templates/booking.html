<!DOCTYPE html>
<!--[if IE 8]> <html lang="en" class="ie8"> <![endif]-->  
<!--[if IE 9]> <html lang="en" class="ie9"> <![endif]-->  
<!--[if !IE]><!--> <html lang="en"> <!--<![endif]-->  
<head>
    <title>TableBooking</title>

    <!-- Meta -->
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="">
    <meta name="author" content="">

    <!-- Favicon -->
    <link rel="shortcut icon" href="{{ url_for('static', filename='favicon.ico')}}">

    <!-- CSS Global Compulsory -->
    <link rel="stylesheet" href="{{ url_for('static', filename='plugins/bootstrap/css/bootstrap.min.css')}}">
    <link rel="stylesheet" href="{{ url_for('static', filename='css/style.css')}}">

    <!-- CSS Header and Footer -->
    <link rel="stylesheet" href="{{ url_for('static', filename='css/headers/header-default.css') }}">
    <link rel="stylesheet" href="{{ url_for('static', filename='css/footers/footer-v1.css') }}">     

    <!-- CSS Implementing Plugins -->
    <link rel="stylesheet" href="{{ url_for('static', filename='plugins/line-icons/line-icons.css')}}">
    <link rel="stylesheet" href="{{ url_for('static', filename='plugins/font-awesome/css/font-awesome.min.css')}}">
    <link rel="stylesheet" href="{{ url_for('static', filename='plugins/scrollbar/css/jquery.mCustomScrollbar.css') }}">
    <link rel="stylesheet" href="{{ url_for('static', filename='plugins/sky-forms-pro/skyforms/css/sky-forms.css') }}">
    <link rel="stylesheet" href="{{ url_for('static', filename='plugins/sky-forms-pro/skyforms/custom/custom-sky-forms.css') }}">
    <link rel="stylesheet" href="{{ url_for('static', filename='plugins/bootstrap-clockpicker/bootstrap-clockpicker.css')}}"></script>
    <!-- CSS Customization -->
    <link rel="stylesheet" href="{{ url_for('static', filename='css/custom.css')}}">
<style>

.INclass a {
    font-weight:bold;
    color:white;
    background-color: green;
    border:1px solid green;    
    height:28px;
    width:28px;
    border-radius:50%;
    -moz-border-radius:50%;
    -webkit-border-radius:50%;
}

.OUTclass a {
    font-weight:bold;
    color:red;
}

.BOTHclass a {
    font-weight:bold;
    color:blue;
}

</style>

</head>	

<body>


<div class="wrapper">
    <!--=== Header ===-->    
    <div class="header">
        <div class="container">
            <!-- Logo -->
            <div>
            <a class="navbar-brand" href="index.html">
                <img id="logo-header" src="../static/img/logos/logo2.png" alt="Logo">
            </a>
            </div>
            <!-- End Logo -->
            <!-- Topbar -->
            <div class="topbar">
                <ul class="loginbar pull-right">
                    <li class="hoverSelector">
                        <i class="fa fa-globe"></i>
                        <a>Panels</a>
                        <ul class="languages hoverSelectorBlock">
                            <li class="active">
                                <a href="/">Index</a> 
                            </li>
                            <li><a href="/customer/">Customer</a></li>
                            <li><a href="javascript:void(0)">Vendor <i class="fa fa-check"></i></a></a></li>
                            <li><a href="/metrics/">Admin</a></li>
                        </ul>
                    </li>
                    <li class="topbar-devider"></li>   
                    <li><a href="page_faq.html">Help</a></li>  
                    <li class="topbar-devider"></li>   
                    <li><a href="page_login.html">Login</a></li>   
                </ul>
                <!-- End Topbar Navigation -->
            </div>
        </div>
        <!-- End Topbar -->
    
        <!-- Navbar -->
        <div class="collapse navbar-collapse mega-menu navbar-responsive-collapse" style="padding-top:25px;">
            <div class="container">
                <ul class="nav navbar-nav">
                    <!-- Home -->
                    <li class="dropdown">
                        <a href="javascript:void(0);" class="dropdown-toggle" data-toggle="dropdown">
                            Home
                        </a>
                        <ul class="dropdown-menu">
                            <li><a href="index.html">Option 1: Default Page</a></li>
                        </ul>
                    </li>
                    <!-- End Home -->

                    <!-- Search Block -->
                    <li>
                        <i class="search fa fa-search search-btn"></i>
                        <div class="search-open">
                            <div class="input-group animated fadeInDown">
                                <input type="text" class="form-control" placeholder="Search">
                                <span class="input-group-btn">
                                    <button class="btn-u" type="button">Go</button>
                                </span>
                            </div>
                        </div>    
                    </li>
                    <!-- End Search Block -->
                    </ul>
                </div><!--/navbar-collapse-->
            </div>    
        </div>            
        <!-- End Navbar -->
    </div>
    <!--=== End Header ===-->   

    <!--=== Profile ===-->
    <div class="profile container content">
    	<div class="row">
            <!--Left Sidebar-->
                {% set active_link = 'booking' %}
        	{% include 'admin/leftmenu_c_nodate.html' %}
            <!--End Left Sidebar-->
            
            <div class="col-md-9">
                <!--Profile Body-->
                <div class="profile-body">
                    <!--Service Block v3-->
                    <div class="row margin-bottom-10">
                        <form action="" id="sky-form2" class="sky-form" method="post">
                        {{form.hidden_tag()}}
                        <div class="col-sm-6 sm-margin-bottom-20">
                            <!--Datepicker-->
                                <div id="inline-start" >
                                    <input type="text" name="datef" id="datef" value="{{datevar}}" required/>
                                    <input type="number" name="booking_id" id="booking_id" style="width:40px;">
                                </div>
                            <!--End Datepicker-->
                        </div>
                        
                        <div class="col-sm-6">              
                                        <div class="row">
                                            <section class="col col-6">
                                                <label class="input">
                                                    <input type="text" id="name" name="name" placeholder="Name" value="" required>

                                                </label>
                                            </section>
                                            <section class="col col-6">
                                                <label class="input">
                                                    <input type="text" id="phone" name="phone" placeholder="Phone#" value="" required>
                                                </label>                            
                                            </section>
                                        </div>
                                        
                                        <div class="row">
                                            <section class="col col-6">
                                                <label class="input">
                                                    <input type="text" id="seats" name="seats" placeholder="Seats" autocomplete="off">
                                                </label>   
                                            </section>
                                            <section class="col col-6">
                                                <label class="input">
                                                    <input type="text" id="table" name="table" placeholder="TableAssign">
                                                </label>   
                                            </section>
                                         </div>
                                        <div class="row">
                                            <section class="col col-6">
                                                <label class="input">
                                                    <div class="input-group clockpicker" data-placement="left" data-align="top" data-autoclose="true">
                                                        <input id="timev" name="timev" type="text" class="form-control">
                                                        <span class="input-group-addon">
                                                            <span class="glyphicon glyphicon-time"></span>
                                                        </span>
                                                    </div>
                                                </label> 
                                            </section>
                                            <section class="col col-6">
                                                <label class="input">
                                                    <input type="text" id="notes" name="notes" placeholder="Notes">
                                                </label>    
                                            </section>
                                         </div>
                                        <div class="row">
                                            <section class="col col-6">
                                                <label class="select">
                                                    <select id="status" name="status">
                                                        <option value="None" selected disabled style="display:none">Status</option>
                                                        <option value="confirmed">Contacted</option>
                                                        <option value="confirmed">Confirmed</option>
                                                        <option value="cancelled">Cancelled</option>
                                                        <option value="noshow">NoShow</option>
                                                    </select>
                                                    <i></i>
                                                </label>   
                                            </section>
                                            <section class="col col-6">
                                                &nbsp;
                                            </section>
                                         </div>
                                        <div class="row panel-heading overflow-h">
                                            <section class="col col-6">
                            <input type="submit" Value="Save iChanges" style="color:#666; margin-left:-15px;">
                            <a id="new_item" href="javascript:void(0)" class="btn-u btn-brd btn-brd-hover btn-u-dark btn-u-xs pull-right" style="color:#555;">New
                            <i class="glyphicon glyphicon-fire" style="font-size:16px;margin-left:5px;"></i></a>
                                            </section>
                                            <section class="col col-6">
                            <a id="add_item" href="javascript:void(0)" class="btn-u btn-brd btn-brd-hover btn-u-dark btn-u-xs pull-right" style="color:#555;">Add
                            <i class="glyphicon glyphicon-plus" style="font-size:16px;margin-left:5px;"></i></a> &nbsp;
    <a id="del_item" class="btn-u btn-brd btn-brd-hover btn-u-dark btn-u-xs pull-right" style="color:#555; margin-right:10px;">Del
                            <i class="glyphicon glyphicon-remove" style="font-size:16px;margin-left:5px;"></i></a>
                                            </section>
                                         </div>  
                        
                        </div>
                        </form>
                    </div><!--/end row-->
                    <!--End Service Block v3-->
    <div style="container";>
        <div class="row">
            <!--Left Sidebar-->
            <div id="booking_table">
                <table style="vertical-align:top; margin-left:20px; width:100%; table-layout:fixed;" border="2">
                    <tr>
                        <td style="vertical-align:top; width:90%" ondrop="drop(event, '')" ondragover="allowDrop(event)" id="">
                            Unsorted Column
                            
                            {% for t in trans %}
                                {% if (t.table == '') or (not t.table) %}
                                <div style="font-family:Meiryo; font-size:14px;" draggable=true ondragstart="drag(event, '{{t.booking_id}}', '{{t.name}}',
                                    '{{t.phone}}', '{{t.seats}}', '{{t.timev}}', '{{t.notes}}', '{{t.status}}')" id="{{t.booking_id}}"
                                    onclick="edit_booking('{{t.booking_id}}', '{{t.name}}',
                                    '{{t.phone}}', '{{t.seats}}', '{{t.timev}}', '{{t.notes}}', '{{t.status}}', '{{t.start_date}}', '{{t.table}}' )">
                                    {{t.name}}
                                    {% if t.seats %} ({{t.seats}}) {%endif%}
                                    {{t.timev}}
                                </div>
                                {% endif %}
                            {% endfor %}
                        </td>
                        {% for i in tablenames %}
                        <td style="vertical-align:top; width:100%" ondrop="drop(event, '{{i.tablename}}')" ondragover="allowDrop(event)" id="{{i.tablename}}">
                            {{i.tablename}}
                                {% for t in trans %}
                                    {% if t.table == i.tablename %}
                                    <div style="font-family:Meiryo; font-size:14px;" draggable=true ondragstart="drag(event, '{{t.booking_id}}',
                                        '{{t.name}}','{{t.phone}}', '{{t.seats}}', '{{t.timev}}', '{{t.notes}}', '{{t.status}}' )" id="{{t.booking_id}}"
                                        onclick="edit_booking('{{t.booking_id}}', '{{t.name}}',
                                        '{{t.phone}}', '{{t.seats}}', '{{t.timev}}', '{{t.notes}}', '{{t.status}}', '{{t.start_date}}', '{{t.table}}' )">
                                        {{t.name}}
                                        {% if t.seats %} ({{t.seats}}) {%endif%}
                                        {{t.timev}}
                                    </div>
                                    {% endif %}
                                {% endfor %}
                        </td>
                        {% endfor %}
                    </tr>
                </table>
            </div>
            <div class="col-md-3 md-margin-bottom-40">
            <span id="suggest">
            </span>
            </div>
        </div>
    </div>
    
<hr style="margin:0px; margin-bottom: 20px;">
                <div class="wrapper">
                    <div class="panel-heading overflow-h" style="color:#555;">
                        <h2 class="panel-title heading-sm pull-left" style="color:#555;"><i class="fa fa-tasks"></i>ListView</h2>
                        <a id="reset" href="javascript:void(0)" class="btn-u btn-brd btn-brd-hover btn-u-dark btn-u-xs pull-right" style="margin-left:20px;">View All</a>
                        <form class="sky-form">
                        <label class="select pull-right">
                            <select id="trans_method" name="trans_method" style="width:130px;">
                                <option value="None" selected disabled style="display:none">TableView</option>
                                <option value="confirmed">Table1</option>
                                <option value="confirmed">Table2</option>
                                <option value="cancelled">Table3</option>
                                <option value="noshow">Table4</option>
                            </select>
                            <i></i>
                        </label>
                        </form>                        
                        
                    </div>

                    <!--Table Search v1-->
                    <div class="table-search-v1">
                    
                        <div class="table-responsive">
                         <div class="tab-v1">
                            <ul class="nav nav-justified nav-tabs">
                                <li class="active"><a data-toggle="tab" href="#profile">Payables/ Receivables</a></li>
                                <li><a data-toggle="tab" href="#payment">Add Item</a></li>
                            </ul>
                   		</div>
                   	    <div class="tab-content">
                                <div id="profile" class="profile-edit tab-pane fade in active">
                                    <table class="table table-hover">
                                        <thead>
                                            <tr>
                                                <th style="white-space:nowrap;" width="15%">Store</th>
                                                <th width="15%">RefID</th>
                                                <th width="15%">date</th>
                                                <th width="10%">time</th>
                                                <th width="10%">Notes</th>
                                                <th>Action</th>
                                            </tr>
                                        </thead>
                                        <tbody id="changebody">
                                                {% for t in all_book %}
                                                <tr>
                                                    <td>
                                                        <a href="javascript:void(0)" style="font-family:Meiryo; font-size:14px;">{{t.name}}</a>
                                                    </td>
                                                    <td>
                                                    <a href="javascript:void(0)" style="font-family:Meiryo; font-size:14px;">
                                                         {{t.phone}} </a></td>
                                                    <td>
                                                         <span style="font-family:Meiryo; font-size:14px;">{{t.start_date}}</span>
                                                    </td>
                                                    <td>
                                                        <span style="font-family:Meiryo; font-size:14px;">{{t.timev}}</span>
                                                    </td>
                                                    <td>
                                                       <span style="font-family:Meiryo; font-size:14px;">{{t.notes}}</span>
                                                    </td>
                                                    <td>
                                                        <span style="font-family:Meiryo; font-size:14px;">{{t.status}}</span>
                                                    </td>
                                                </tr>                                    
                                                {% endfor %}
                                            <tr><td colspan="6">
                                            <button type="button" class="btn-u btn-u-default btn-u-sm btn-block">Load More</button>
                                            </td></tr>
                                            
                                        </tbody>
                                    </table>
                                </div>
                            </div>
                        </div>    
                    </div>
                </div>
                    <!--End Table Search v1-->
                        
                     <hr style="margin:0px; margin-bottom: 20px;">

                    <!--Table Search v2-->
                    <div class="table-search-v2 margin-bottom-20">
                       <div class="panel-heading overflow-h">
                            <h2 class="panel-title heading-sm pull-left"><i class="fa fa-tasks"></i>Outstanding Payable</h2>
                            <a href="javascript:void(0)" class="btn-u btn-brd btn-brd-hover btn-u-dark btn-u-xs pull-right" style="margin-left:20px;">View All</a>
                            
<a href="javascript:void(0)" class="btn-u btn-brd btn-brd-hover btn-u-dark btn-u-xs pull-right" style="margin-left:20px;">Add Receive<i class="glyphicon glyphicon-plus" style="font-size:16px;margin-left:5px;"></i></a>                            
                            
<a href="javascript:void(0)" class="btn-u btn-brd btn-brd-hover btn-u-dark btn-u-xs pull-right" style="">Search Receive <i class="search fa fa-search search-btn pull-right" style="font-size:16px;margin-top:-6px;margin-left:5px;"></i></a>                                   
                            
                        </div>   
                        <div class="table-responsive">
                            <table class="table table-hover">
                                <thead>
                                    <tr>
                                        <th>Vendor</th>
                                        <th>About</th>
                                        <th>Status</th>
                                        <th>Actions</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <tr>
                                        <td>
                                            <img class="rounded-x" src="{{ url_for('static', filename='img/testimonials/img1.jpg') }}" alt="">
                                        </td>
                                        <td class="td-width">
                                            <h3><a href="javascript:void(0)">Jason Bourne - Salary</a></h3>
                                            <p>BALANCE: 20,583NT CASH</p>
                                            <small class="hex">Due Date January 20th, 2016 (16 days past due)</small>
                                        </td>
                                        <td>
                                            <span class="label label-success">History</span>
                                        </td>
                                        <td>
						   <span style="color:#666666;margin-right:5px;"> <i class="fa fa-print"></i> Invoice </span>
                           <span style="color:#666666;margin-right:5px;"><i class="fa fa-envelope"></i> Email </span>
                           <span style="color:#666666;margin-right:5px;"><i class="fa fa-ban"></i> Suspend </span>
                                        </td>
                                    </tr>
                                    <tr>
                                        <td>
                                            <img class="rounded-x" src="{{ url_for('static', filename='img/testimonials/img2.jpg')}}" alt="">
                                        </td>
                                        <td>
                                            <h3><a href="javascript:void(0)">CHT - Landline</a></h3>
                                            <p>BALANCE: 3,583NT CASH</p>
                                            <small class="hex">Due Date January 20th, 2016 (4 days past due)</small>
                                        </td>
                                        <td>
                                            <span class="label label-info"> Pending</span>
                                        </td>
                                        <td>
                                            <ul class="list-inline s-icons">
                                                <li>
                                                    <a data-placement="top" data-toggle="tooltip" class="tooltips" data-original-title="Facebook" href="javascript:void(0)">
                                                        <i class="fa fa-facebook"></i>
                                                    </a>
                                                </li>
                                                <li>
                                                    <a data-placement="top" data-toggle="tooltip" class="tooltips" data-original-title="Twitter" href="javascript:void(0)">
                                                        <i class="fa fa-twitter"></i>
                                                    </a>
                                                </li>
                                                <li>
                                                    <a data-placement="top" data-toggle="tooltip" class="tooltips" data-original-title="Dropbox" href="javascript:void(0)">
                                                    <i class="fa fa-dropbox"></i>
                                                    </a>
                                                </li>
                                                <li>
                                                    <a data-placement="top" data-toggle="tooltip" class="tooltips" data-original-title="Linkedin" href="javascript:void(0)">
                                                        <i class="fa fa-linkedin"></i>
                                                    </a>
                                                </li>
                                            </ul>
                                            <span><a href="javascript:void(0)">info@example.com</a></span>
                                            <span><a href="javascript:void(0)">www.htmlstream.com</a></span>
                                        </td>
                                    </tr>
                                    <tr>
                                        <td>
                                            <img class="rounded-x" src="{{ url_for('static', filename='img/testimonials/img3.jpg')}}" alt="">
                                        </td>
                                        <td>
                                            <h3><a href="javascript:void(0)">Pellentesque semper tempus vehicula</a></h3>
                                            <p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Sed id commodo lacus. Fusce non malesuada ante. Donec vel arcu.</p>
                                            <small class="hex">Joined March 3, 2014</small>
                                        </td>
                                        <td>
                                            <span class="label label-warning">Expiring</span>
                                        </td>
                                        <td>
                                            <ul class="list-inline s-icons">
                                                <li>
                                                    <a data-placement="top" data-toggle="tooltip" class="tooltips" data-original-title="Facebook" href="javascript:void(0)">
                                                        <i class="fa fa-facebook"></i>
                                                    </a>
                                                </li>
                                                <li>
                                                    <a data-placement="top" data-toggle="tooltip" class="tooltips" data-original-title="Twitter" href="javascript:void(0)">
                                                        <i class="fa fa-twitter"></i>
                                                    </a>
                                                </li>
                                                <li>
                                                    <a data-placement="top" data-toggle="tooltip" class="tooltips" data-original-title="Dropbox" href="javascript:void(0)">
                                                    <i class="fa fa-dropbox"></i>
                                                    </a>
                                                </li>
                                                <li>
                                                    <a data-placement="top" data-toggle="tooltip" class="tooltips" data-original-title="Linkedin" href="javascript:void(0)">
                                                        <i class="fa fa-linkedin"></i>
                                                    </a>
                                                </li>
                                            </ul>
                                            <span><a href="javascript:void(0)">info@example.com</a></span>
                                            <span><a href="javascript:void(0)">www.htmlstream.com</a></span>
                                        </td>
                                    </tr>
                                    <tr>
                                        <td>
                                            <img class="rounded-x" src="{{ url_for('static', filename='img/testimonials/img4.jpg')}}" alt="">
                                        </td>
                                        <td>
                                            <h3><a href="javascript:void(0)">Alesuada fames ac turpis egestas</a></h3>
                                            <p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Sed id commodo lacus. Fusce non malesuada ante. Donec vel arcu.</p>
                                            <small class="hex">Joined March 4, 2014</small>
                                        </td>
                                        <td>
                                            <span class="label label-danger">Error!</span>
                                        </td>
                                        <td>
                                            <ul class="list-inline s-icons">
                                                <li>
                                                    <a data-placement="top" data-toggle="tooltip" class="tooltips" data-original-title="Facebook" href="javascript:void(0)">
                                                        <i class="fa fa-facebook"></i>
                                                    </a>
                                                </li>
                                                <li>
                                                    <a data-placement="top" data-toggle="tooltip" class="tooltips" data-original-title="Twitter" href="javascript:void(0)">
                                                        <i class="fa fa-twitter"></i>
                                                    </a>
                                                </li>
                                                <li>
                                                    <a data-placement="top" data-toggle="tooltip" class="tooltips" data-original-title="Dropbox" href="javascript:void(0)">
                                                    <i class="fa fa-dropbox"></i>
                                                    </a>
                                                </li>
                                                <li>
                                                    <a data-placement="top" data-toggle="tooltip" class="tooltips" data-original-title="Linkedin" href="javascript:void(0)">
                                                        <i class="fa fa-linkedin"></i>
                                                    </a>
                                                </li>
                                            </ul>
                                            <span><a href="javascript:void(0)">info@example.com</a></span>
                                            <span><a href="javascript:void(0)">www.htmlstream.com</a></span>
                                        </td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>    
                    </div>
                    <!--End Table Search v2-->
                </div>
                <!--End Profile Body-->
            </div>
        </div><!--/end row-->
    </div><!--/container-->    
    <!--=== End Profile ===-->
    <div class="footer-v1">
        <!--=== Copyright ===-->
        <div class="copyright">
            <div class="container">
                <div class="row">
                    <div class="col-md-6">                     
                        <p>
                            2014 &copy; Unify. ALL Rights Reserved. 
                            <a target="_blank" href="https://twitter.com/htmlstream">Htmlstream</a> | <a href="javascript:void(0)">Privacy Policy</a> | <a href="javascript:void(0)">Terms of Service</a>
                        </p>
                    </div>
                    <div class="col-md-6">  
                        <a href="index.html">
                            <img class="pull-right" id="logo-footer" src="{{ url_for('static', filename='img/logo2-default.png')}} " alt="">
                        </a>
                    </div>
                </div>
            </div> 
        </div><!--/copyright--> 
        <!--=== End Copyright ===-->
    </div>
</div><!--/wrapper-->

<!-- JS Global Compulsory -->           
<script type="text/javascript" src="{{ url_for('static', filename='plugins/jquery/jquery.min.js')}}"></script>
<script type="text/javascript" src="{{ url_for('static', filename='plugins/jquery/jquery-migrate.min.js')}}"></script>
<script type="text/javascript" src="{{ url_for('static', filename='plugins/bootstrap/js/bootstrap.min.js')}}"></script> 
<!-- JS Implementing Plugins -->
<script type="text/javascript" src="{{ url_for('static', filename='plugins/back-to-top.js')}}"></script>
<script type="text/javascript" src="{{ url_for('static', filename='plugins/smoothScroll.js')}}"></script>
<script src="{{ url_for('static', filename='plugins/sky-forms-pro/skyforms/js/jquery-ui.min.js')}}"></script>
<!-- JS Customization -->
<script type="text/javascript" src="{{ url_for('static', filename='js/custom.js')}}"></script>

<!-- JS Page Level -->           
<script type="text/javascript" src="{{ url_for('static', filename='js/app.js')}}"></script>

<script type="text/javascript" src="{{ url_for('static', filename='js/plugins/datepicker.js')}}"></script>
<script type="text/javascript" src="{{ url_for('static', filename='plugins/bootstrap-clockpicker/bootstrap-clockpicker.js')}}"></script>
<script type="text/javascript">
    jQuery(document).ready(function() {
        App.init();
        Datepicker.initDatepicker();
    });
</script>
        
<script type="text/javascript">

var eventDates = getdates('{{ref}}');

$('#inline-start').datepicker({
    onSelect: function(dateText, inst)
    { 
      var dateAsString = dateText; //the first parameter of this function
      var dateAsObject = $(this).datepicker( 'getDate' ); //the getDate method

      document.getElementById("datef").value = dateAsString.replace(/(\d\d)\/(\d\d)\/(\d{4})/, "$3-$1-$2");

      $.ajax({
          url: "/bookingdatelist/",
          type: "get",
          data: {jsdata: dateText},
          success: function(response) {
            $("#changebody").html(response);}
          })
      $.ajax({
          url: "/bookingtableupdate/",
          type: "get",
          data: {dateg: dateText},
          success: function(response) {
            $("#booking_table").html(response);}
          })
    },
    beforeShowDay: function(date) {
        var highlight = eventDates[date];
        if (highlight)
            { return [true, "INclass", highlight];
             }
        else {return [true, '', ''];}
    }
});

function getdates(ref) {
    eventDates = new Object();
    $.ajax({
      url: "/date_test/",
      type: "get",
      dataType: "json",
      success: function(response)
      {
        var dataObject = response;
        for (i=0; i < dataObject.length; i++)
        {
            dataObject[i] = formatDate(dataObject[i]).toString();
            eventDates[new Date(dataObject[i])] = new Date(dataObject[i]).toString();
        }
        if (ref) {
            var new_date = ref.replace(/(\d{4})-(\d\d)-(\d\d)/, "$2/$3/$1");
            $("#inline-start").datepicker("setDate", new_date);
            }
        else {
            $("#inline-start").datepicker("setDate", new Date());
            }
      }
    })
    return eventDates;
}

function formatDate(date) {
    var d = new Date(date),
        month = '' + (d.getMonth() + 1),
        day = '' + d.getDate(),
        year = d.getFullYear();

    if (month.length < 2) month = '0' + month;
    if (day.length < 2) day = '0' + day;

    return [month, day, year].join('/');
}

$(document).ready(function() {
    $("#add_item").click(function() {
         if ((document.getElementById("name").value != "") && (document.getElementById("phone").value != ""))
            {
                $.ajax({
                  url: "/booking_add/",
                  type: "get",
                  data: {name: document.getElementById("name").value,
                         phone: document.getElementById("phone").value,
                         seats: document.getElementById("seats").value,
                         table: document.getElementById("table").value,
                         timev: document.getElementById("timev").value,
                         notes: document.getElementById("notes").value,
                         status: document.getElementById("status").value,
                         datef: document.getElementById("datef").value,
                         },
                  success: function(response) {
                    $("#booking_table").html(response);}
                  })
                
                var new_date = document.getElementById("datef").value.replace(/(\d{4})-(\d\d)-(\d\d)/, "$2/$3/$1");
                $.ajax({
                      url: "/bookingdatelist/",
                      type: "get",
                      data: {jsdata: new_date},
                      success: function(response) {
                        $("#changebody").html(response);}
                      })
                document.getElementById("name").value="";
                document.getElementById("phone").value="";
                document.getElementById("seats").value="";
                document.getElementById("table").value="";
                document.getElementById("notes").value="";
                document.getElementById("status").value="1";
            }
         else {alert('Please Fill in Fields');}
    });

    $("#del_item").click(function() {
         if ((document.getElementById("booking_id").value != "") && (document.getElementById("name").value != ""))
            {
                if (confirm("Confirm Delete?")){
                    var new_date = document.getElementById("datef").value.replace(/(\d{4})-(\d\d)-(\d\d)/, "$2/$3/$1");
                    $.ajax({
                      url: "/booking_del/",
                      type: "get",
                      data: {bid: document.getElementById("booking_id").value,
                             datef: document.getElementById("datef").value
                             },
                      success: function(response) {
                        $("#booking_table").html(response);}
                      })
                    $.ajax({
                      url: "/bookingdatelist/",
                      type: "get",
                      data: {jsdata: new_date},
                      success: function(response) {
                        $("#changebody").html(response);}
                      })
                    document.getElementById("name").value="";
                    document.getElementById("phone").value="";
                    document.getElementById("seats").value="";
                    document.getElementById("table").value="";
                    document.getElementById("timev").value="";
                    document.getElementById("notes").value="";
                    document.getElementById("status").value="None";
                    document.getElementById("booking_id").value="";
                }
            }
         else {alert('No Item to Delete');}
    });

    $("#new_item").click(function() {
        document.getElementById("name").value="";
        document.getElementById("phone").value="";
        document.getElementById("seats").value="";
        document.getElementById("table").value="";
        document.getElementById("timev").value="";
        document.getElementById("notes").value="";
        document.getElementById("status").value="None";
        document.getElementById("booking_id").value="";        
    });   
    
    $("#reset").click(function() {
        $.ajax({
          url: "/bookingdatelist/",
          type: "get",
          success: function(response) {
            $("#changebody").html(response);}
          })
    });    
});

function bot_rec(date,ref,store){
    document.getElementById("datef").value=date;
    document.getElementById("ref_id").value=ref;
    document.getElementById("store_name").value=store;
    document.getElementById("item_name").value='';
    document.getElementById("price").value='';
    document.getElementById("net_weight").value='';
    document.getElementById("unit_weight").value='';
    document.getElementById("unit").value='';
    document.getElementById("receipt_id").value='';
    $.ajax({
        url: "/bot_rec_update/",
        type: "get",
        data: {ref: ref},
        success: function(response) {
            $("#rec_items").html(response);}
    })
    var new_date = date.replace(/(\d{4})-(\d\d)-(\d\d)/, "$2/$3/$1");
    $("#inline-start").datepicker("setDate", new_date);
}

function manual_store(){
    $.ajax({
        url: "/store_suggest/",
        type: "get",
        data: {store: '',
               dateg: document.getElementById("datef").value},
        success: function(response) {
            $("#suggest").html(response);}
    })
}

$("#store_name").keyup(function() {
    $.ajax({
        url: "/store_suggest/",
        type: "get",
        data: {store: document.getElementById("store_name").value,
               dateg: document.getElementById("datef").value},
        success: function(response) {
            $("#suggest").html(response);}
    })
});

function manual_item(){
    $.ajax({
        url: "/item_suggest/",
        type: "get",
        data: {store: document.getElementById("store_name").value,
               item: '',
               dateg: document.getElementById("datef").value},
        success: function(response) {
            $("#suggest").html(response);}
    })
}

$("#item_name").keyup(function() {
    $.ajax({
        url: "/item_suggest/",
        type: "get",
        data: {store: document.getElementById("store_name").value,
               item: document.getElementById("item_name").value,
               dateg: document.getElementById("datef").value},
        success: function(response) {
            $("#suggest").html(response);}
    })
});


function change_item(item, price){
    document.getElementById("item_name").value = item;
    document.getElementById("price").value = price;
}

function change_store(store){
    document.getElementById("store_name").value = store;
}

function edit_booking(booking_id, name, phone, seats, time, notes, status, start_date, table){
    document.getElementById("booking_id").value = booking_id;
    document.getElementById("name").value = name;
    document.getElementById("phone").value = phone;
    if (seats != 'None') {document.getElementById("seats").value = seats;}
        else if (seats == 'None') {document.getElementById("seats").value = '';}
    if (time != 'None') {document.getElementById("timev").value = time;}
        else if (time == 'None') {document.getElementById("timev").value = '';}
    if (notes != 'None') {document.getElementById("notes").value = notes;}
        else if (notes == 'None') {document.getElementById("notes").value = '';}
    if (status != 'None') {document.getElementById("status").value = status;}
        else if (status == 'None') {document.getElementById("status").value = '';}
    document.getElementById("datef").value = start_date;
    var new_date = start_date.replace(/(\d{4})-(\d\d)-(\d\d)/, "$2/$3/$1");
    $("#inline-start").datepicker("setDate", new_date);
    if (table != 'None') {document.getElementById("table").value = table;}
        else if (table == 'None') {document.getElementById("table").value = '';}
}

function allowDrop(event) {
    event.preventDefault();
}

function drag(event, booking_id, name, phone, seats, time, notes, status) {
    event.dataTransfer.setData("text", event.target.id);
    document.getElementById("booking_id").value = booking_id;
    document.getElementById("name").value = name;
    document.getElementById("phone").value = phone;
    document.getElementById("seats").value = seats;
    document.getElementById("timev").value = time;
    document.getElementById("notes").value = notes;
    if (status != 'None') {document.getElementById("status").value = status;}
        else if (status == 'None') {document.getElementById("status").value = 'None';}
}

function drop(event, table) {
    event.preventDefault();
    var data = event.dataTransfer.getData("text");
    document.getElementById("table").value = table;
      $.ajax({
          url: "/bookingtablecommit/",
          type: "get",
          data: {sdate: document.getElementById("datef").value,
                 booking_id: document.getElementById("booking_id").value,
                 table: document.getElementById("table").value
                 },
          success: function(response) {
            $("#booking_table").html(response);}
      })
    event.target.appendChild(document.getElementById(data));
    document.getElementById("table").value = table;
}

$('.clockpicker').clockpicker();
</script> 
 

<!--[if lt IE 9]>
    <script src="{{ url_for('static', filename='plugins/respond.js')}}"></script>
    <script src="{{ url_for('static', filename='plugins/html5shiv.js')}}"></script>
<![endif]-->

</body>
</html>	
